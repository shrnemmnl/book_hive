{% load static %} {% include 'includes/header.html' %}

<div class="container-fluid">
  <div class="row">
    <!-- Include sidebar -->
    <div class="col-lg-2">{% include 'user/UserProfile/sidebar.html' %}</div>

    <!-- Main Content Column -->
    <div class="col-lg-10 py-5">
      <div class="tab-pane fade show active" id="wallet">
        <h4 class="mb-4">My Wallet</h4>

        <div class="card mb-4">
          <div class="card-body shadow-lg">
            <div class="row align-items-center">
              <div class="col-md-6">
                <h5 class="card-title">Wallet Balance</h5>
                <h2 class="text-primary mb-0">₹ {{wallet_amount}}</h2>
              </div>
              <!-- <div class="col-md-6 text-md-end mt-3 mt-md-0">
                <button class="btn btn-primary">Add Money</button>
              </div> -->
            </div>
          </div>
        </div>

        <h5 class="mb-3">Transactions</h5>
        <div class="table-responsive">
          <table class="table align-middle">
            <thead>
              <tr>
                <th scope="col">Date</th>
                <th scope="col">Description</th>
                <th scope="col">Type</th>
                <th scope="col" class="text-end">Amount</th>
              </tr>
            </thead>
            <tbody>
              {% for tx in transactions %}
              <tr>
                <td>{{ tx.created_at|date:"d M Y, h:i A" }}</td>
                <td class="text-muted">{{ tx.description|default:"—" }}</td>
                <td>
                  <span class="badge {% if tx.transaction_type == 'credit' %}bg-success{% elif tx.transaction_type == 'refund' %}bg-primary{% else %}bg-danger{% endif %}">
                    {{ tx.transaction_type|capfirst }}
                  </span>
                </td>
                <td class="text-end">
                  {% if tx.transaction_type in 'credit,refund' %}
                    <span class="text-success">+ ₹{{ tx.amount|floatformat:2 }}</span>
                  {% else %}
                    <span class="text-danger">- ₹{{ tx.amount|floatformat:2 }}</span>
                  {% endif %}
                </td>
              </tr>
              {% empty %}
              <tr>
                <td colspan="4" class="text-center text-muted">No transactions yet.</td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      </div> 
    </div>
  </div>
</div>
{% include 'includes/footer.html' %}
